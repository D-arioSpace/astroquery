stages:
    - test

python_tests:
    image: python:3.8.10
    stage: test
    script:
        - python3 -m venv venv
        - source venv/bin/activate ven
        - pip install astroquery # For testing
        - pip install wheel # To create wheel of ESANEOCC
        - pip install coverage
        - python setup.py bdist_wheel
        - pip install .
        - pip install -r requirements.txt
        - coverage run -m pytest -rp test/test*.py
        - coverage report ESANEOCC/*.py